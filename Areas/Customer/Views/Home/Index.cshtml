@model List<ApplicationUser>

@using Microsoft.AspNetCore.Identity
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@{
    ViewData["Title"] = "Home Page";
}
<!--Main Container
    Left Pane holds the Friends
    Right Pane(bigger width holds the selected Friends.)
    -->
<div>
    <div style="display:inline-flex; height: 85vh;overflow:auto">
        <!--User Pane-->
        <div id="friends-pane">
            <!--Friends List-->
            <div id="friends-list">
                <!--
            @{
                var userImg = @"/Images/" + User.Identity.Name + ".jpg";
            }
            <img src=@userImg class="rounded-circle" width="30%" height="35%"/>
                -->
                <input id="userSearch" type="text" placeholder="Search a User"><span><i class="fas fa-search icon"></i></span>
                <ul id="user-search-list" class="list-group">
                </ul>
                <h3>Friends</h3>

                <div>
                    <ul class="list-group">
                        @foreach (var item in Model)
                        {
                            <li onclick="openChat('@item.ChatName','@item.Email')" class="rounded-pill friend-card list-group-item-light">
                                <img class="rounded-circle" width="25%" height="100%" src="@item.ProfileImage" />
                                @item.ChatName
                            </li>
                        }
                    </ul>
                </div>

            </div>
        </div>

        <!--Chat Pane-->
        <div id="chat-pane">

        </div>
    </div>
</div>

<audio id="notifySound" controls="controls" hidden>
    <source src="/sms_notification.mp3" type="audio/mp3" />
</audio>

@section Scripts {
    <script src="~/lib/signalr/dist/browser/signalr.js"></script>
    <script src="~/js/index.js" defer></script>
}
